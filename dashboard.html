
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de EPIs - Dashboard</title>
    <!-- Supabase SDK para autenticação e manipulação de dados -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Font Awesome para ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Folha de estilo customizada -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-shield-alt"></i> Gestão de EPIs</h1>
            <p class="subtitle">Sistema de gerenciamento de Equipamentos de Proteção Individual</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="setActiveTab('epis')">
                <i class="fas fa-shield-alt"></i> EPIs
            </button>
            <button class="tab" onclick="setActiveTab('entregas')">
                <i class="fas fa-hand-holding"></i> Entregas
            </button>
            <button class="tab" onclick="setActiveTab('relatorios')">
                <i class="fas fa-chart-bar"></i> Relatórios
            </button>
        </div>

        <div id="message-area"></div>

        <div id="epis-section">
            <!-- Estatísticas (Adicionadas para melhor visualização) -->
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-boxes"></i>
                    <h3 id="total-epis-count">0</h3>
                    <p>Total de EPIs Cadastrados</p>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--success-color) 0%, #4caf50 100%);">
                    <i class="fas fa-check-circle"></i>
                    <h3 id="estoque-ok-count">0</h3>
                    <p>Estoque OK</p>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--warning-color) 0%, #ff9800 100%);">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3 id="estoque-atencao-count">0</h3>
                    <p>Estoque em Atenção</p>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--danger-color) 0%, #f44336 100%);">
                    <i class="fas fa-times-circle"></i>
                    <h3 id="estoque-critico-count">0</h3>
                    <p>Estoque Crítico</p>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title"><i class="fas fa-plus-circle"></i> <span id="form-title">Adicionar Novo EPI</span></h2>
                <form id="epiForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nome"><i class="fas fa-tag"></i> Nome do EPI *</label>
                            <input type="text" id="nome" required>
                        </div>
                        <div class="form-group">
                            <label for="categoria"><i class="fas fa-list"></i> Categoria *</label>
                            <select id="categoria" required>
                                <option value="">Selecione...</option>
                                <option value="Proteção da Cabeça">Proteção da Cabeça</option>
                                <option value="Proteção dos Olhos">Proteção dos Olhos</option>
                                <option value="Proteção Auditiva">Proteção Auditiva</option>
                                <option value="Proteção Respiratória">Proteção Respiratória</option>
                                <option value="Proteção das Mãos">Proteção das Mãos</option>
                                <option value="Proteção dos Pés">Proteção dos Pés</option>
                                <option value="Proteção do Corpo">Proteção do Corpo</option>
                                <option value="Proteção contra Quedas">Proteção contra Quedas</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ca"><i class="fas fa-certificate"></i> CA (Certificado de Aprovação) *</label>
                            <input type="text" id="ca" required>
                        </div>
                        <div class="form-group">
                            <label for="estoque"><i class="fas fa-boxes"></i> Estoque Atual *</label>
                            <input type="number" id="estoque" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="minimo"><i class="fas fa-exclamation-triangle"></i> Estoque Mínimo *</label>
                            <input type="number" id="minimo" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="validade"><i class="fas fa-calendar-alt"></i> Validade</label>
                            <input type="date" id="validade">
                        </div>
                        <div class="form-group">
                            <label for="fornecedor"><i class="fas fa-truck"></i> Fornecedor</label>
                            <input type="text" id="fornecedor">
                        </div>
                        <div class="form-group">
                            <label for="localizacao"><i class="fas fa-map-marker-alt"></i> Localização</label>
                            <input type="text" id="localizacao" placeholder="Ex: Almoxarifado - Prateleira A3">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="observacoes"><i class="fas fa-comment"></i> Observações</label>
                        <textarea id="observacoes" rows="3" placeholder="Informações adicionais sobre o EPI..."></textarea>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <i class="fas fa-save"></i> Salvar EPI
                        </button>
                        <button type="button" class="btn btn-warning" id="cancel-btn" style="display: none;" onclick="resetForm()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-shield-alt"></i> EPIs Cadastrados</h2>
                <div id="loading" class="loading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i> Carregando EPIs...
                </div>
                <div id="epis-container" class="epis-grid"></div>
            </div>
        </div>

        <div id="entregas-section" style="display: none;">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-hand-holding"></i> Registrar Entrega de EPI</h2>
                <form id="entregaForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="colaborador"><i class="fas fa-user"></i> Colaborador *</label>
                            <input type="text" id="colaborador" required>
                        </div>
                        <div class="form-group">
                            <label for="epi_id"><i class="fas fa-shield-alt"></i> EPI *</label>
                            <select id="epi_id" required>
                                <option value="">Selecione um EPI...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantidade"><i class="fas fa-sort-numeric-up"></i> Quantidade *</label>
                            <input type="number" id="quantidade" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="data_entrega"><i class="fas fa-calendar"></i> Data da Entrega *</label>
                            <input type="date" id="data_entrega" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="observacoes_entrega"><i class="fas fa-comment"></i> Observações</label>
                        <textarea id="observacoes_entrega" rows="3"></textarea>
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-check"></i> Registrar Entrega
                        </button>
                    </div>
                </form>
            </div>

            <div class="card">
                <h2 class="card-title"><i class="fas fa-history"></i> Histórico de Entregas</h2>
                <div id="entregas-container" class="entregas-list"></div>
            </div>
        </div>

        <div id="relatorios-section" style="display: none;">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-chart-bar"></i> Relatórios e Estatísticas</h2>
                <!-- Adicionando estrutura básica para gráficos de relatórios -->
                <div class="stats-grid">
                    <div class="stat-card" style="background: linear-gradient(135deg, #1e90ff 0%, #00bfff 100%);">
                        <i class="fas fa-users"></i>
                        <h3 id="colaboradores-count">0</h3>
                        <p>Colaboradores Atendidos</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #ff6347 0%, #ff4500 100%);">
                        <i class="fas fa-calendar-times"></i>
                        <h3 id="vencidos-count">0</h3>
                        <p>EPIs Vencidos</p>
                    </div>
                </div>
                <div id="relatorios-container">
                    <p>Conteúdo de relatórios e gráficos será gerado dinamicamente pelo JavaScript.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Script para a lógica de autenticação e funções de UI -->
    <script src="scripts.js"></script>
</body>
</html>
Manus